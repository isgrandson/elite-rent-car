<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Elite Rent Car">
    <meta name="theme-color" content="#6464fa">
    
    <title>ELITE RENT A CAR KALENDAR</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9IiM2NDY0ZmEiLz4KPHN2ZyB4PSI0NSIgeT0iNjAiIHdpZHRoPSI5MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CjxwYXRoIGQ9Ik0xNCAySDlhMSAxIDAgMCAwLTEgMXY1YTEgMSAwIDAgMCAxIDFoNWExIDEgMCAwIDEgMSAxdjVhMSAxIDAgMCAwIDEgMWg1YTEgMSAwIDAgMCAxLTF2LTVhMSAxIDAgMCAxIDEtMWg1YTEgMSAwIDAgMCAxLTFWM2ExIDEgMCAwIDAtMS0xaC01YTEgMSAwIDAgMS0xLTFWM2ExIDEgMCAwIDAtMS0xeiIvPgo8L3N2Zz4KPC9zdmc+">
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f9fafb;
            overscroll-behavior: none;
        }
        
        .app-container {
            max-width: 414px;
            margin: 0 auto;
            min-height: 100vh;
            background: white;
            position: relative;
        }
        
        .ios-safe-area {
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        ::-webkit-scrollbar {
            display: none;
        }
        
        * {
            -webkit-tap-highlight-color: transparent;
        }

        .phone-link {
            color: #6464fa;
            text-decoration: underline;
            cursor: pointer;
        }

        .calendar-day {
            transition: all 0.2s ease;
        }

        .calendar-day:hover {
            transform: scale(1.05);
        }

        .warning-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 350px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div id="root" class="app-container ios-safe-area"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide React icons kao komponente
        const Calendar = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );
        
        const Car = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M14 16H9a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1z"/>
                <path d="M12 7V2H8v5"/>
                <path d="M16 7V2h4v5"/>
                <circle cx="6.5" cy="16.5" r="2.5"/>
                <circle cx="17.5" cy="16.5" r="2.5"/>
            </svg>
        );
        
        const Plus = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        );
        
        const Clock = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
            </svg>
        );
        
        const Phone = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
        );
        
        const User = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
        );
        
        const ChevronLeft = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <polyline points="15,18 9,12 15,6"/>
            </svg>
        );
        
        const ChevronRight = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <polyline points="9,18 15,12 9,6"/>
            </svg>
        );

        const Edit = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
            </svg>
        );

        const Trash = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <polyline points="3,6 5,6 21,6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                <line x1="10" y1="11" x2="10" y2="17"/>
                <line x1="14" y1="11" x2="14" y2="17"/>
            </svg>
        );

        const AlertTriangle = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                <line x1="12" y1="9" x2="12" y2="13"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
        );

        const X = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );

        const MessageCircle = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
            </svg>
        );

        const EliteRentCarApp = () => {
            const [currentView, setCurrentView] = useState('dashboard');
            const [selectedVehicle, setSelectedVehicle] = useState(null);
            const [selectedReservation, setSelectedReservation] = useState(null);
            const [currentDate, setCurrentDate] = useState(new Date());
            const [selectedDate, setSelectedDate] = useState(null);
            const [showModal, setShowModal] = useState(false);
            const [modalType, setModalType] = useState(''); // 'reservation-info', 'edit-vehicle', 'edit-reservation', 'delete-confirm'
            const [editingVehicle, setEditingVehicle] = useState(null);
            const [editingReservation, setEditingReservation] = useState(null);

            const [vehicles, setVehicles] = useState(() => {
                const saved = localStorage.getItem('eliteRentCarData');
                return saved ? JSON.parse(saved) : [
                    {
                        id: 1,
                        name: 'POLO',
                        reservations: [
                            {
                                id: 1,
                                client: 'Marko Petrović',
                                phone: '+387 66 123 456',
                                startDate: '2025-06-13',
                                startTime: '10:00',
                                endDate: '2025-06-15',
                                endTime: '19:00'
                            }
                        ]
                    },
                    {
                        id: 2,
                        name: 'GOLF',
                        reservations: [
                            {
                                id: 2,
                                client: 'Ana Milic',
                                phone: '+387 65 987 654',
                                startDate: '2025-06-15',
                                startTime: '12:00',
                                endDate: '2025-06-17',
                                endTime: '12:00'
                            }
                        ]
                    }
                ];
            });

            const [newVehicle, setNewVehicle] = useState('');
            const [newReservation, setNewReservation] = useState({
                client: '',
                phone: '',
                startDate: '',
                startTime: '',
                endDate: '',
                endTime: ''
            });

            // Čuvanje podataka u localStorage
            useEffect(() => {
                localStorage.setItem('eliteRentCarData', JSON.stringify(vehicles));
            }, [vehicles]);

            // Funkcije za upravljanje vozilima
            const addVehicle = () => {
                if (newVehicle.trim()) {
                    setVehicles([...vehicles, {
                        id: Date.now(),
                        name: newVehicle.toUpperCase(),
                        reservations: []
                    }]);
                    setNewVehicle('');
                    setCurrentView('dashboard');
                }
            };

            const updateVehicle = () => {
                if (editingVehicle && editingVehicle.name.trim()) {
                    setVehicles(vehicles.map(v => 
                        v.id === editingVehicle.id 
                            ? {...v, name: editingVehicle.name.toUpperCase()}
                            : v
                    ));
                    setEditingVehicle(null);
                    setShowModal(false);
                }
            };

            const deleteVehicle = (vehicleId) => {
                setVehicles(vehicles.filter(v => v.id !== vehicleId));
                setShowModal(false);
            };

            // Funkcije za upravljanje rezervacijama
            const addReservation = () => {
                if (selectedVehicle && newReservation.client && newReservation.phone && 
                    newReservation.startDate && newReservation.endDate) {
                    
                    const updatedVehicles = vehicles.map(vehicle => {
                        if (vehicle.id === selectedVehicle.id) {
                            return {
                                ...vehicle,
                                reservations: [...vehicle.reservations, {
                                    id: Date.now(),
                                    ...newReservation
                                }]
                            };
                        }
                        return vehicle;
                    });
                    
                    setVehicles(updatedVehicles);
                    setNewReservation({
                        client: '',
                        phone: '',
                        startDate: '',
                        startTime: '',
                        endDate: '',
                        endTime: ''
                    });
                    setCurrentView('dashboard');
                }
            };

            const updateReservation = () => {
                if (editingReservation && editingReservation.client && editingReservation.phone && 
                    editingReservation.startDate && editingReservation.endDate) {
                    
                    setVehicles(vehicles.map(vehicle => ({
                        ...vehicle,
                        reservations: vehicle.reservations.map(res => 
                            res.id === editingReservation.id ? editingReservation : res
                        )
                    })));
                    
                    setEditingReservation(null);
                    setShowModal(false);
                }
            };

            const deleteReservation = (reservationId) => {
                setVehicles(vehicles.map(vehicle => ({
                    ...vehicle,
                    reservations: vehicle.reservations.filter(res => res.id !== reservationId)
                })));
                setShowModal(false);
            };

            // Pomoćne funkcije
            const isDayReserved = (date, vehicleId) => {
                const vehicle = vehicles.find(v => v.id === vehicleId);
                if (!vehicle) return false;

                const dateStr = date.toISOString().split('T')[0];
                return vehicle.reservations.find(res => {
                    const start = new Date(res.startDate);
                    const end = new Date(res.endDate);
                    const checkDate = new Date(dateStr);
                    return checkDate >= start && checkDate <= end;
                });
            };

            const getReservationForDate = (date, vehicleId) => {
                return isDayReserved(date, vehicleId);
            };

            const isCurrentlyRented = (reservation) => {
                const today = new Date();
                const start = new Date(reservation.startDate);
                const end = new Date(reservation.endDate);
                
                // Postaviti vrijeme na početak dana za poređenje
                today.setHours(0, 0, 0, 0);
                start.setHours(0, 0, 0, 0);
                end.setHours(0, 0, 0, 0);
                
                return today >= start && today <= end;
            };

            const needsWarning = (reservation) => {
                const today = new Date();
                const start = new Date(reservation.startDate);
                
                today.setHours(0, 0, 0, 0);
                start.setHours(0, 0, 0, 0);
                
                const diffTime = start.getTime() - today.getTime();
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                return diffDays >= 0 && diffDays <= 2;
            };

            const generateCalendarDays = () => {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const days = [];

                for (let i = 0; i < firstDay.getDay(); i++) {
                    days.push(null);
                }

                for (let day = 1; day <= lastDay.getDate(); day++) {
                    days.push(new Date(year, month, day));
                }

                return days;
            };

            const handlePhoneClick = (phone) => {
                const cleanPhone = phone.replace(/\s+/g, '');
                
                // Kreiraj opcije za poziv i poruke
                const options = [
                    { text: 'Pozovi', action: () => window.location.href = `tel:${cleanPhone}` },
                    { text: 'WhatsApp', action: () => window.open(`https://wa.me/${cleanPhone.replace('+', '')}`, '_blank') },
                    { text: 'Viber', action: () => window.open(`viber://chat?number=${cleanPhone}`, '_blank') },
                    { text: 'SMS', action: () => window.location.href = `sms:${cleanPhone}` }
                ];

                // Prikaži opcije (jednostavan alert za sada, mogu napraviti bolji modal)
                const choice = window.confirm(`Kontaktiraj ${phone}\n\nOK = Pozovi\nCancel = WhatsApp`);
                if (choice) {
                    window.location.href = `tel:${cleanPhone}`;
                } else {
                    window.open(`https://wa.me/${cleanPhone.replace('+', '')}`, '_blank');
                }
            };

            const handleDateClick = (date, vehicleId) => {
                const reservation = getReservationForDate(date, vehicleId);
                if (reservation) {
                    // Zauzet datum - prikaži informacije
                    setSelectedReservation({...reservation, vehicleId});
                    setModalType('reservation-info');
                    setShowModal(true);
                } else {
                    // Slobodan datum - kreiraj novu rezervaciju
                    const vehicle = vehicles.find(v => v.id === vehicleId);
                    setSelectedVehicle(vehicle);
                    setNewReservation({
                        ...newReservation,
                        startDate: date.toISOString().split('T')[0]
                    });
                    setCurrentView('addReservation');
                }
            };

            const monthNames = [
                'Januar', 'Februar', 'Mart', 'April', 'Maj', 'Jun',
                'Jul', 'Avgust', 'Septembar', 'Oktobar', 'Novembar', 'Decembar'
            ];

            // Modal komponenta
            const Modal = ({ children }) => {
                if (!showModal) return null;
                
                return (
                    <div className="modal-overlay" onClick={() => setShowModal(false)}>
                        <div className="modal-content" onClick={e => e.stopPropagation()}>
                            {children}
                        </div>
                    </div>
                );
            };

            // Dashboard View - samo trenutne rezervacije
            if (currentView === 'dashboard') {
                const currentReservations = vehicles.flatMap(vehicle => 
                    vehicle.reservations
                        .filter(res => isCurrentlyRented(res))
                        .map(res => ({...res, vehicleName: vehicle.name}))
                );

                const upcomingReservations = vehicles.flatMap(vehicle => 
                    vehicle.reservations
                        .filter(res => needsWarning(res) && !isCurrentlyRented(res))
                        .map(res => ({...res, vehicleName: vehicle.name}))
                );

                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="text-white p-4 text-center" style={{ background: 'linear-gradient(135deg, #6464fa 0%, #4f46e5 100%)' }}>
                            <h1 className="text-xl font-bold">ELITE RENT A CAR</h1>
                            <p className="text-sm opacity-90">Trenutno Stanje</p>
                        </div>

                        <div className="flex justify-around p-4 bg-white shadow-sm">
                            <button 
                                onClick={() => setCurrentView('addVehicle')}
                                className="flex items-center space-x-2 px-4 py-2 rounded-lg text-white"
                                style={{ backgroundColor: '#6464fa' }}
                            >
                                <Car size={16} />
                                <span>Dodaj Vozilo</span>
                            </button>
                            <button 
                                onClick={() => setCurrentView('calendar')}
                                className="flex items-center space-x-2 px-4 py-2 rounded-lg border-2"
                                style={{ borderColor: '#6464fa', color: '#6464fa' }}
                            >
                                <Calendar size={16} />
                                <span>Kalendar</span>
                            </button>
                        </div>

                        {/* Upozorenja za skorašnje rezervacije */}
                        {upcomingReservations.length > 0 && (
                            <div className="p-4">
                                <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg warning-pulse">
                                    <div className="flex items-center mb-2">
                                        <AlertTriangle size={20} className="text-yellow-600 mr-2" />
                                        <h3 className="font-bold text-yellow-800">Skorašnje Izdavanja</h3>
                                    </div>
                                    {upcomingReservations.map(res => (
                                        <div key={res.id} className="text-sm text-yellow-700 mb-1">
                                            <strong>{res.vehicleName}</strong> - {res.client} ({res.startDate} u {res.startTime})
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        <div className="p-4 space-y-4">
                            <h2 className="text-lg font-bold text-gray-800">Trenutno Iznajmljena Vozila</h2>
                            
                            {currentReservations.length === 0 ? (
                                <div className="bg-white rounded-lg shadow-md p-6 text-center">
                                    <p className="text-gray-500 italic">Sva vozila su slobodna</p>
                                </div>
                            ) : (
                                currentReservations.map(res => (
                                    <div key={res.id} className="bg-white rounded-lg shadow-md p-4 border-l-4" style={{ borderLeftColor: '#6464fa' }}>
                                        <h3 className="font-bold text-lg mb-3" style={{ color: '#6464fa' }}>{res.vehicleName}</h3>
                                        
                                        <div className="border rounded-lg p-3 bg-gray-50">
                                            <div className="flex items-center space-x-2 mb-1">
                                                <User size={16} style={{ color: '#6464fa' }} />
                                                <span className="font-semibold">{res.client}</span>
                                            </div>
                                            <div className="flex items-center space-x-2 mb-1">
                                                <Phone size={16} style={{ color: '#6464fa' }} />
                                                <span 
                                                    className="text-gray-600 phone-link"
                                                    onClick={() => handlePhoneClick(res.phone)}
                                                >
                                                    {res.phone}
                                                </span>
                                            </div>
                                            <div className="flex items-center space-x-2">
                                                <Clock size={16} style={{ color: '#6464fa' }} />
                                                <span className="text-gray-600">
                                                    {res.startDate} {res.startTime} - {res.endDate} {res.endTime}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>

                        <Modal>
                            {modalType === 'delete-confirm' && (
                                <div className="p-6">
                                    <h3 className="text-lg font-bold mb-4">Potvrdi Brisanje</h3>
                                    <p className="text-gray-600 mb-4">Da li si siguran da želiš da obrišeš ovo vozilo?</p>
                                    <div className="flex space-x-3">
                                        <button 
                                            onClick={() => deleteVehicle(selectedVehicle?.id)}
                                            className="flex-1 py-2 bg-red-500 text-white rounded-lg font-semibold"
                                        >
                                            Obriši
                                        </button>
                                        <button 
                                            onClick={() => setShowModal(false)}
                                            className="flex-1 py-2 border-2 border-gray-300 rounded-lg font-semibold"
                                        >
                                            Otkaži
                                        </button>
                                    </div>
                                </div>
                            )}
                        </Modal>
                    </div>
                );
            }

            // Add Vehicle View
            if (currentView === 'addVehicle') {
                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="text-white p-4 text-center" style={{ background: 'linear-gradient(135deg, #6464fa 0%, #4f46e5 100%)' }}>
                            <h1 className="text-xl font-bold">Dodaj Novo Vozilo</h1>
                        </div>
                        
                        <div className="p-4">
                            <div className="bg-white rounded-lg shadow-md p-6">
                                <label className="block text-gray-700 font-semibold mb-2">Naziv Vozila</label>
                                <input
                                    type="text"
                                    value={newVehicle}
                                    onChange={(e) => setNewVehicle(e.target.value)}
                                    placeholder="npr. POLO, GOLF, PASSAT..."
                                    className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                />
                                
                                <div className="flex space-x-3 mt-6">
                                    <button 
                                        onClick={addVehicle}
                                        className="flex-1 py-3 rounded-lg text-white font-semibold"
                                        style={{ backgroundColor: '#6464fa' }}
                                    >
                                        Dodaj Vozilo
                                    </button>
                                    <button 
                                        onClick={() => setCurrentView('dashboard')}
                                        className="flex-1 py-3 rounded-lg border-2 font-semibold"
                                        style={{ borderColor: '#6464fa', color: '#6464fa' }}
                                    >
                                        Otkaži
                                    </button>
                                </div>
                            </div>

                            {/* Lista postojećih vozila sa opcijama za editovanje */}
                            {vehicles.length > 0 && (
                                <div className="mt-6">
                                    <h3 className="text-lg font-bold mb-4">Postojeća Vozila</h3>
                                    {vehicles.map(vehicle => (
                                        <div key={vehicle.id} className="bg-white rounded-lg shadow-md p-4 mb-3 flex justify-between items-center">
                                            <span className="font-semibold" style={{ color: '#6464fa' }}>{vehicle.name}</span>
                                            <div className="flex space-x-2">
                                                <button
                                                    onClick={() => {
                                                        setEditingVehicle({...vehicle});
                                                        setModalType('edit-vehicle');
                                                        setShowModal(true);
                                                    }}
                                                    className="p-2 rounded-lg border-2"
                                                    style={{ borderColor: '#6464fa', color: '#6464fa' }}
                                                >
                                                    <Edit size={16} />
                                                </button>
                                                <button
                                                    onClick={() => {
                                                        setSelectedVehicle(vehicle);
                                                        setModalType('delete-confirm');
                                                        setShowModal(true);
                                                    }}
                                                    className="p-2 rounded-lg border-2 border-red-500 text-red-500"
                                                >
                                                    <Trash size={16} />
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>

                        <Modal>
                            {modalType === 'edit-vehicle' && editingVehicle && (
                                <div className="p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-bold">Edituj Vozilo</h3>
                                        <button onClick={() => setShowModal(false)}>
                                            <X size={20} />
                                        </button>
                                    </div>
                                    <input
                                        type="text"
                                        value={editingVehicle.name}
                                        onChange={(e) => setEditingVehicle({...editingVehicle, name: e.target.value})}
                                        className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500 mb-4"
                                    />
                                    <div className="flex space-x-3">
                                        <button 
                                            onClick={updateVehicle}
                                            className="flex-1 py-2 text-white rounded-lg font-semibold"
                                            style={{ backgroundColor: '#6464fa' }}
                                        >
                                            Sačuvaj
                                        </button>
                                        <button 
                                            onClick={() => setShowModal(false)}
                                            className="flex-1 py-2 border-2 border-gray-300 rounded-lg font-semibold"
                                        >
                                            Otkaži
                                        </button>
                                    </div>
                                </div>
                            )}

                            {modalType === 'delete-confirm' && (
                                <div className="p-6">
                                    <h3 className="text-lg font-bold mb-4">Potvrdi Brisanje</h3>
                                    <p className="text-gray-600 mb-4">Da li si siguran da želiš da obrišeš vozilo <strong>{selectedVehicle?.name}</strong>?</p>
                                    <div className="flex space-x-3">
                                        <button 
                                            onClick={() => deleteVehicle(selectedVehicle?.id)}
                                            className="flex-1 py-2 bg-red-500 text-white rounded-lg font-semibold"
                                        >
                                            Obriši
                                        </button>
                                        <button 
                                            onClick={() => setShowModal(false)}
                                            className="flex-1 py-2 border-2 border-gray-300 rounded-lg font-semibold"
                                        >
                                            Otkaži
                                        </button>
                                    </div>
                                </div>
                            )}
                        </Modal>
                    </div>
                );
            }

            // Add Reservation View
            if (currentView === 'addReservation') {
                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="text-white p-4 text-center" style={{ background: 'linear-gradient(135deg, #6464fa 0%, #4f46e5 100%)' }}>
                            <h1 className="text-xl font-bold">Nova Rezervacija</h1>
                            <p className="text-sm opacity-90">{selectedVehicle?.name}</p>
                        </div>
                        
                        <div className="p-4">
                            <div className="bg-white rounded-lg shadow-md p-6 space-y-4">
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">Ime i Prezime Klijenta</label>
                                    <input
                                        type="text"
                                        value={newReservation.client}
                                        onChange={(e) => setNewReservation({...newReservation, client: e.target.value})}
                                        placeholder="Marko Petrović"
                                        className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">Broj Telefona</label>
                                    <input
                                        type="tel"
                                        value={newReservation.phone}
                                        onChange={(e) => setNewReservation({...newReservation, phone: e.target.value})}
                                        placeholder="+387 66 123 456"
                                        className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                    />
                                </div>
                                
                                <div className="grid grid-cols-2 gap-3">
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">Od - Datum</label>
                                        <input
                                            type="date"
                                            value={newReservation.startDate}
                                            onChange={(e) => setNewReservation({...newReservation, startDate: e.target.value})}
                                            className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">Od - Vrijeme</label>
                                        <input
                                            type="time"
                                            value={newReservation.startTime}
                                            onChange={(e) => setNewReservation({...newReservation, startTime: e.target.value})}
                                            className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                        />
                                    </div>
                                </div>
                                
                                <div className="grid grid-cols-2 gap-3">
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">Do - Datum</label>
                                        <input
                                            type="date"
                                            value={newReservation.endDate}
                                            onChange={(e) => setNewReservation({...newReservation, endDate: e.target.value})}
                                            className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">Do - Vrijeme</label>
                                        <input
                                            type="time"
                                            value={newReservation.endTime}
                                            onChange={(e) => setNewReservation({...newReservation, endTime: e.target.value})}
                                            className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                        />
                                    </div>
                                </div>
                                
                                <div className="flex space-x-3 mt-6">
                                    <button 
                                        onClick={addReservation}
                                        className="flex-1 py-3 rounded-lg text-white font-semibold"
                                        style={{ backgroundColor: '#6464fa' }}
                                    >
                                        Sačuvaj Rezervaciju
                                    </button>
                                    <button 
                                        onClick={() => setCurrentView('dashboard')}
                                        className="flex-1 py-3 rounded-lg border-2 font-semibold"
                                        style={{ borderColor: '#6464fa', color: '#6464fa' }}
                                    >
                                        Otkaži
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // Calendar View
            if (currentView === 'calendar') {
                const calendarDays = generateCalendarDays();
                
                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="text-white p-4" style={{ background: 'linear-gradient(135deg, #6464fa 0%, #4f46e5 100%)' }}>
                            <div className="flex items-center justify-between">
                                <button 
                                    onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))}
                                    className="p-2 rounded-full hover:bg-white hover:bg-opacity-20"
                                >
                                    <ChevronLeft size={20} />
                                </button>
                                
                                <div className="text-center">
                                    <h1 className="text-xl font-bold">
                                        {monthNames[currentDate.getMonth()]} {currentDate.getFullYear()}
                                    </h1>
                                </div>
                                
                                <button 
                                    onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))}
                                    className="p-2 rounded-full hover:bg-white hover:bg-opacity-20"
                                >
                                    <ChevronRight size={20} />
                                </button>
                            </div>
                        </div>

                        <button 
                            onClick={() => setCurrentView('dashboard')}
                            className="m-4 px-4 py-2 rounded-lg border-2 font-semibold"
                            style={{ borderColor: '#6464fa', color: '#6464fa' }}
                        >
                            ← Nazad na Dashboard
                        </button>

                        <div className="p-4">
                            {vehicles.map(vehicle => (
                                <div key={vehicle.id} className="mb-6 bg-white rounded-lg shadow-md overflow-hidden">
                                    <div className="p-4 text-white font-bold text-center" style={{ backgroundColor: '#6464fa' }}>
                                        {vehicle.name}
                                    </div>
                                    
                                    <div className="grid grid-cols-7 bg-gray-100">
                                        {['Ned', 'Pon', 'Uto', 'Sre', 'Čet', 'Pet', 'Sub'].map(day => (
                                            <div key={day} className="p-2 text-center font-semibold text-gray-600 text-sm">
                                                {day}
                                            </div>
                                        ))}
                                    </div>
                                    
                                    <div className="grid grid-cols-7">
                                        {calendarDays.map((day, index) => {
                                            if (!day) return <div key={index} className="aspect-square border border-gray-200"></div>;
                                            
                                            const reservation = getReservationForDate(day, vehicle.id);
                                            const isStartDate = reservation && day.toISOString().split('T')[0] === reservation.startDate;
                                            const isEndDate = reservation && day.toISOString().split('T')[0] === reservation.endDate;
                                            
                                            return (
                                                <div 
                                                    key={index} 
                                                    className="aspect-square border border-gray-200 calendar-day cursor-pointer"
                                                    onClick={() => handleDateClick(day, vehicle.id)}
                                                >
                                                    <div 
                                                        className={`w-full h-full flex flex-col items-center justify-center text-xs font-medium ${
                                                            reservation 
                                                                ? 'bg-red-500 text-white' 
                                                                : 'bg-green-400 text-white hover:bg-green-500'
                                                        }`}
                                                    >
                                                        <div className="font-bold">{day.getDate()}</div>
                                                        {isStartDate && reservation.startTime && (
                                                            <div className="text-xs mt-1">OD {reservation.startTime}</div>
                                                        )}
                                                        {isEndDate && reservation.endTime && (
                                                            <div className="text-xs mt-1">DO {reservation.endTime}</div>
                                                        )}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            ))}
                        </div>

                        <Modal>
                            {modalType === 'reservation-info' && selectedReservation && (
                                <div className="p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-bold">Informacije o Rezervaciji</h3>
                                        <button onClick={() => setShowModal(false)}>
                                            <X size={20} />
                                        </button>
                                    </div>
                                    
                                    <div className="space-y-3 mb-4">
                                        <div className="flex items-center space-x-2">
                                            <Car size={16} style={{ color: '#6464fa' }} />
                                            <span className="font-semibold">{vehicles.find(v => v.id === selectedReservation.vehicleId)?.name}</span>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <User size={16} style={{ color: '#6464fa' }} />
                                            <span>{selectedReservation.client}</span>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <Phone size={16} style={{ color: '#6464fa' }} />
                                            <span 
                                                className="phone-link"
                                                onClick={() => handlePhoneClick(selectedReservation.phone)}
                                            >
                                                {selectedReservation.phone}
                                            </span>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <Clock size={16} style={{ color: '#6464fa' }} />
                                            <span>{selectedReservation.startDate} {selectedReservation.startTime} - {selectedReservation.endDate} {selectedReservation.endTime}</span>
                                        </div>
                                    </div>

                                    <div className="flex space-x-2 mb-4">
                                        <button 
                                            onClick={() => handlePhoneClick(selectedReservation.phone)}
                                            className="flex-1 py-2 text-white rounded-lg font-semibold flex items-center justify-center space-x-2"
                                            style={{ backgroundColor: '#25D366' }}
                                        >
                                            <Phone size={16} />
                                            <span>Pozovi</span>
                                        </button>
                                        <button 
                                            onClick={() => window.open(`https://wa.me/${selectedReservation.phone.replace(/\s+/g, '').replace('+', '')}`, '_blank')}
                                            className="flex-1 py-2 text-white rounded-lg font-semibold flex items-center justify-center space-x-2"
                                            style={{ backgroundColor: '#25D366' }}
                                        >
                                            <MessageCircle size={16} />
                                            <span>WhatsApp</span>
                                        </button>
                                    </div>
                                    
                                    <div className="flex space-x-3">
                                        <button 
                                            onClick={() => {
                                                setEditingReservation({...selectedReservation});
                                                setModalType('edit-reservation');
                                            }}
                                            className="flex-1 py-2 border-2 rounded-lg font-semibold"
                                            style={{ borderColor: '#6464fa', color: '#6464fa' }}
                                        >
                                            Edituj
                                        </button>
                                        <button 
                                            onClick={() => {
                                                if (window.confirm('Da li si siguran da želiš da obrišeš ovu rezervaciju?')) {
                                                    deleteReservation(selectedReservation.id);
                                                }
                                            }}
                                            className="flex-1 py-2 bg-red-500 text-white rounded-lg font-semibold"
                                        >
                                            Obriši
                                        </button>
                                    </div>
                                </div>
                            )}

                            {modalType === 'edit-reservation' && editingReservation && (
                                <div className="p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-bold">Edituj Rezervaciju</h3>
                                        <button onClick={() => setShowModal(false)}>
                                            <X size={20} />
                                        </button>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-gray-700 font-semibold mb-2">Klijent</label>
                                            <input
                                                type="text"
                                                value={editingReservation.client}
                                                onChange={(e) => setEditingReservation({...editingReservation, client: e.target.value})}
                                                className="w-full p-2 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <label className="block text-gray-700 font-semibold mb-2">Telefon</label>
                                            <input
                                                type="tel"
                                                value={editingReservation.phone}
                                                onChange={(e) => setEditingReservation({...editingReservation, phone: e.target.value})}
                                                className="w-full p-2 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                            />
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="block text-gray-700 font-semibold mb-2">Od - Datum</label>
                                                <input
                                                    type="date"
                                                    value={editingReservation.startDate}
                                                    onChange={(e) => setEditingReservation({...editingReservation, startDate: e.target.value})}
                                                    className="w-full p-2 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-gray-700 font-semibold mb-2">Od - Vrijeme</label>
                                                <input
                                                    type="time"
                                                    value={editingReservation.startTime}
                                                    onChange={(e) => setEditingReservation({...editingReservation, startTime: e.target.value})}
                                                    className="w-full p-2 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                                />
                                            </div>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="block text-gray-700 font-semibold mb-2">Do - Datum</label>
                                                <input
                                                    type="date"
                                                    value={editingReservation.endDate}
                                                    onChange={(e) => setEditingReservation({...editingReservation, endDate: e.target.value})}
                                                    className="w-full p-2 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-gray-700 font-semibold mb-2">Do - Vrijeme</label>
                                                <input
                                                    type="time"
                                                    value={editingReservation.endTime}
                                                    onChange={(e) => setEditingReservation({...editingReservation, endTime: e.target.value})}
                                                    className="w-full p-2 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                                />
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="flex space-x-3 mt-6">
                                        <button 
                                            onClick={updateReservation}
                                            className="flex-1 py-2 text-white rounded-lg font-semibold"
                                            style={{ backgroundColor: '#6464fa' }}
                                        >
                                            Sačuvaj
                                        </button>
                                        <button 
                                            onClick={() => setShowModal(false)}
                                            className="flex-1 py-2 border-2 border-gray-300 rounded-lg font-semibold"
                                        >
                                            Otkaži
                                        </button>
                                    </div>
                                </div>
                            )}
                        </Modal>
                    </div>
                );
            }
        };

        ReactDOM.render(<EliteRentCarApp />, document.getElementById('root'));
    </script>
    
    <script>
        // Service Worker registracija za PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js').then(function(registration) {
                    console.log('ServiceWorker registration successful');
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html>
