<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Elite Rent Car">
    <meta name="theme-color" content="#6464fa">
    
    <title>ELITE RENT A CAR KALENDAR</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9IiM2NDY0ZmEiLz4KPHN2ZyB4PSI0NSIgeT0iNjAiIHdpZHRoPSI5MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CjxwYXRoIGQ9Ik0xNCAySDlhMSAxIDAgMCAwLTEgMXY1YTEgMSAwIDAgMCAxIDFoNWExIDEgMCAwIDEgMSAxdjVhMSAxIDAgMCAwIDEgMWg1YTEgMSAwIDAgMCAxLTF2LTVhMSAxIDAgMCAxIDEtMWg1YTEgMSAwIDAgMCAxLTFWM2ExIDEgMCAwIDAtMS0xaC01YTEgMSAwIDAgMS0xLTFWM2ExIDEgMCAwIDAtMS0xeiIvPgo8L3N2Zz4KPC9zdmc+">
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f9fafb;
            overscroll-behavior: none;
        }
        
        .app-container {
            max-width: 414px;
            margin: 0 auto;
            min-height: 100vh;
            background: white;
            position: relative;
        }
        
        /* iOS Safari fixes */
        .ios-safe-area {
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            display: none;
        }
        
        * {
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body>
    <div id="root" class="app-container ios-safe-area"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide React icons kao komponente
        const Calendar = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );
        
        const Car = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M14 16H9a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1z"/>
                <path d="M12 7V2H8v5"/>
                <path d="M16 7V2h4v5"/>
                <circle cx="6.5" cy="16.5" r="2.5"/>
                <circle cx="17.5" cy="16.5" r="2.5"/>
            </svg>
        );
        
        const Plus = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        );
        
        const Clock = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
            </svg>
        );
        
        const Phone = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
        );
        
        const User = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
        );
        
        const ChevronLeft = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <polyline points="15,18 9,12 15,6"/>
            </svg>
        );
        
        const ChevronRight = ({ size = 24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <polyline points="9,18 15,12 9,6"/>
            </svg>
        );

        const EliteRentCarApp = () => {
            const [currentView, setCurrentView] = useState('dashboard');
            const [selectedVehicle, setSelectedVehicle] = useState(null);
            const [currentDate, setCurrentDate] = useState(new Date());
            const [vehicles, setVehicles] = useState(() => {
                const saved = localStorage.getItem('eliteRentCarData');
                return saved ? JSON.parse(saved) : [
                    {
                        id: 1,
                        name: 'POLO',
                        reservations: [
                            {
                                id: 1,
                                client: 'Marko Petrović',
                                phone: '+387 66 123 456',
                                startDate: '2025-06-13',
                                startTime: '10:00',
                                endDate: '2025-06-15',
                                endTime: '10:00'
                            }
                        ]
                    },
                    {
                        id: 2,
                        name: 'GOLF',
                        reservations: []
                    }
                ];
            });

            const [newVehicle, setNewVehicle] = useState('');
            const [newReservation, setNewReservation] = useState({
                client: '',
                phone: '',
                startDate: '',
                startTime: '',
                endDate: '',
                endTime: ''
            });

            // Čuvanje podataka u localStorage
            useEffect(() => {
                localStorage.setItem('eliteRentCarData', JSON.stringify(vehicles));
            }, [vehicles]);

            const addVehicle = () => {
                if (newVehicle.trim()) {
                    setVehicles([...vehicles, {
                        id: Date.now(),
                        name: newVehicle.toUpperCase(),
                        reservations: []
                    }]);
                    setNewVehicle('');
                    setCurrentView('dashboard');
                }
            };

            const addReservation = () => {
                if (selectedVehicle && newReservation.client && newReservation.phone && 
                    newReservation.startDate && newReservation.endDate) {
                    
                    const updatedVehicles = vehicles.map(vehicle => {
                        if (vehicle.id === selectedVehicle.id) {
                            return {
                                ...vehicle,
                                reservations: [...vehicle.reservations, {
                                    id: Date.now(),
                                    ...newReservation
                                }]
                            };
                        }
                        return vehicle;
                    });
                    
                    setVehicles(updatedVehicles);
                    setNewReservation({
                        client: '',
                        phone: '',
                        startDate: '',
                        startTime: '',
                        endDate: '',
                        endTime: ''
                    });
                    setCurrentView('dashboard');
                }
            };

            const isDayReserved = (date, vehicleId) => {
                const vehicle = vehicles.find(v => v.id === vehicleId);
                if (!vehicle) return false;

                const dateStr = date.toISOString().split('T')[0];
                return vehicle.reservations.some(res => {
                    const start = new Date(res.startDate);
                    const end = new Date(res.endDate);
                    const checkDate = new Date(dateStr);
                    return checkDate >= start && checkDate <= end;
                });
            };

            const generateCalendarDays = () => {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const days = [];

                for (let i = 0; i < firstDay.getDay(); i++) {
                    days.push(null);
                }

                for (let day = 1; day <= lastDay.getDate(); day++) {
                    days.push(new Date(year, month, day));
                }

                return days;
            };

            const monthNames = [
                'Januar', 'Februar', 'Mart', 'April', 'Maj', 'Jun',
                'Jul', 'Avgust', 'Septembar', 'Oktobar', 'Novembar', 'Decembar'
            ];

            // Dashboard View
            if (currentView === 'dashboard') {
                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="text-white p-4 text-center" style={{ background: 'linear-gradient(135deg, #6464fa 0%, #4f46e5 100%)' }}>
                            <h1 className="text-xl font-bold">ELITE RENT A CAR</h1>
                            <p className="text-sm opacity-90">Kalendar Vozila</p>
                        </div>

                        <div className="flex justify-around p-4 bg-white shadow-sm">
                            <button 
                                onClick={() => setCurrentView('addVehicle')}
                                className="flex items-center space-x-2 px-4 py-2 rounded-lg text-white"
                                style={{ backgroundColor: '#6464fa' }}
                            >
                                <Car size={16} />
                                <span>Dodaj Vozilo</span>
                            </button>
                            <button 
                                onClick={() => setCurrentView('calendar')}
                                className="flex items-center space-x-2 px-4 py-2 rounded-lg border-2"
                                style={{ borderColor: '#6464fa', color: '#6464fa' }}
                            >
                                <Calendar size={16} />
                                <span>Kalendar</span>
                            </button>
                        </div>

                        <div className="p-4 space-y-4">
                            {vehicles.map(vehicle => (
                                <div key={vehicle.id} className="bg-white rounded-lg shadow-md p-4 border-l-4" style={{ borderLeftColor: '#6464fa' }}>
                                    <div className="flex justify-between items-start mb-3">
                                        <h3 className="font-bold text-lg" style={{ color: '#6464fa' }}>{vehicle.name}</h3>
                                        <button 
                                            onClick={() => {
                                                setSelectedVehicle(vehicle);
                                                setCurrentView('addReservation');
                                            }}
                                            className="p-2 rounded-full text-white"
                                            style={{ backgroundColor: '#6464fa' }}
                                        >
                                            <Plus size={16} />
                                        </button>
                                    </div>
                                    
                                    {vehicle.reservations.length === 0 ? (
                                        <p className="text-gray-500 italic">Nema rezervacija</p>
                                    ) : (
                                        vehicle.reservations.map(res => (
                                            <div key={res.id} className="border rounded-lg p-3 mb-2 bg-gray-50">
                                                <div className="flex items-center space-x-2 mb-1">
                                                    <User size={16} style={{ color: '#6464fa' }} />
                                                    <span className="font-semibold">{res.client}</span>
                                                </div>
                                                <div className="flex items-center space-x-2 mb-1">
                                                    <Phone size={16} style={{ color: '#6464fa' }} />
                                                    <span className="text-gray-600">{res.phone}</span>
                                                </div>
                                                <div className="flex items-center space-x-2">
                                                    <Clock size={16} style={{ color: '#6464fa' }} />
                                                    <span className="text-gray-600">
                                                        {res.startDate} {res.startTime} - {res.endDate} {res.endTime}
                                                    </span>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            }

            // Add Vehicle View
            if (currentView === 'addVehicle') {
                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="text-white p-4 text-center" style={{ background: 'linear-gradient(135deg, #6464fa 0%, #4f46e5 100%)' }}>
                            <h1 className="text-xl font-bold">Dodaj Novo Vozilo</h1>
                        </div>
                        
                        <div className="p-4">
                            <div className="bg-white rounded-lg shadow-md p-6">
                                <label className="block text-gray-700 font-semibold mb-2">Naziv Vozila</label>
                                <input
                                    type="text"
                                    value={newVehicle}
                                    onChange={(e) => setNewVehicle(e.target.value)}
                                    placeholder="npr. POLO, GOLF, PASSAT..."
                                    className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                />
                                
                                <div className="flex space-x-3 mt-6">
                                    <button 
                                        onClick={addVehicle}
                                        className="flex-1 py-3 rounded-lg text-white font-semibold"
                                        style={{ backgroundColor: '#6464fa' }}
                                    >
                                        Dodaj Vozilo
                                    </button>
                                    <button 
                                        onClick={() => setCurrentView('dashboard')}
                                        className="flex-1 py-3 rounded-lg border-2 font-semibold"
                                        style={{ borderColor: '#6464fa', color: '#6464fa' }}
                                    >
                                        Otkaži
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // Add Reservation View
            if (currentView === 'addReservation') {
                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="text-white p-4 text-center" style={{ background: 'linear-gradient(135deg, #6464fa 0%, #4f46e5 100%)' }}>
                            <h1 className="text-xl font-bold">Nova Rezervacija</h1>
                            <p className="text-sm opacity-90">{selectedVehicle?.name}</p>
                        </div>
                        
                        <div className="p-4">
                            <div className="bg-white rounded-lg shadow-md p-6 space-y-4">
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">Ime i Prezime Klijenta</label>
                                    <input
                                        type="text"
                                        value={newReservation.client}
                                        onChange={(e) => setNewReservation({...newReservation, client: e.target.value})}
                                        placeholder="Marko Petrović"
                                        className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">Broj Telefona</label>
                                    <input
                                        type="tel"
                                        value={newReservation.phone}
                                        onChange={(e) => setNewReservation({...newReservation, phone: e.target.value})}
                                        placeholder="+387 66 123 456"
                                        className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                    />
                                </div>
                                
                                <div className="grid grid-cols-2 gap-3">
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">Od - Datum</label>
                                        <input
                                            type="date"
                                            value={newReservation.startDate}
                                            onChange={(e) => setNewReservation({...newReservation, startDate: e.target.value})}
                                            className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">Od - Vrijeme</label>
                                        <input
                                            type="time"
                                            value={newReservation.startTime}
                                            onChange={(e) => setNewReservation({...newReservation, startTime: e.target.value})}
                                            className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                        />
                                    </div>
                                </div>
                                
                                <div className="grid grid-cols-2 gap-3">
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">Do - Datum</label>
                                        <input
                                            type="date"
                                            value={newReservation.endDate}
                                            onChange={(e) => setNewReservation({...newReservation, endDate: e.target.value})}
                                            className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">Do - Vrijeme</label>
                                        <input
                                            type="time"
                                            value={newReservation.endTime}
                                            onChange={(e) => setNewReservation({...newReservation, endTime: e.target.value})}
                                            className="w-full p-3 border-2 rounded-lg focus:outline-none focus:border-purple-500"
                                        />
                                    </div>
                                </div>
                                
                                <div className="flex space-x-3 mt-6">
                                    <button 
                                        onClick={addReservation}
                                        className="flex-1 py-3 rounded-lg text-white font-semibold"
                                        style={{ backgroundColor: '#6464fa' }}
                                    >
                                        Sačuvaj Rezervaciju
                                    </button>
                                    <button 
                                        onClick={() => setCurrentView('dashboard')}
                                        className="flex-1 py-3 rounded-lg border-2 font-semibold"
                                        style={{ borderColor: '#6464fa', color: '#6464fa' }}
                                    >
                                        Otkaži
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // Calendar View
            if (currentView === 'calendar') {
                const calendarDays = generateCalendarDays();
                
                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="text-white p-4" style={{ background: 'linear-gradient(135deg, #6464fa 0%, #4f46e5 100%)' }}>
                            <div className="flex items-center justify-between">
                                <button 
                                    onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))}
                                    className="p-2 rounded-full hover:bg-white hover:bg-opacity-20"
                                >
                                    <ChevronLeft size={20} />
                                </button>
                                
                                <div className="text-center">
                                    <h1 className="text-xl font-bold">
                                        {monthNames[currentDate.getMonth()]} {currentDate.getFullYear()}
                                    </h1>
                                </div>
                                
                                <button 
                                    onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))}
                                    className="p-2 rounded-full hover:bg-white hover:bg-opacity-20"
                                >
                                    <ChevronRight size={20} />
                                </button>
                            </div>
                        </div>

                        <button 
                            onClick={() => setCurrentView('dashboard')}
                            className="m-4 px-4 py-2 rounded-lg border-2 font-semibold"
                            style={{ borderColor: '#6464fa', color: '#6464fa' }}
                        >
                            ← Nazad na Dashboard
                        </button>

                        <div className="p-4">
                            {vehicles.map(vehicle => (
                                <div key={vehicle.id} className="mb-6 bg-white rounded-lg shadow-md overflow-hidden">
                                    <div className="p-4 text-white font-bold text-center" style={{ backgroundColor: '#6464fa' }}>
                                        {vehicle.name}
                                    </div>
                                    
                                    <div className="grid grid-cols-7 bg-gray-100">
                                        {['Ned', 'Pon', 'Uto', 'Sre', 'Čet', 'Pet', 'Sub'].map(day => (
                                            <div key={day} className="p-2 text-center font-semibold text-gray-600 text-sm">
                                                {day}
                                            </div>
                                        ))}
                                    </div>
                                    
                                    <div className="grid grid-cols-7">
                                        {calendarDays.map((day, index) => (
                                            <div key={index} className="aspect-square border border-gray-200">
                                                {day && (
                                                    <div 
                                                        className={`w-full h-full flex items-center justify-center text-sm font-medium ${
                                                            isDayReserved(day, vehicle.id) 
                                                                ? 'bg-red-500 text-white' 
                                                                : 'bg-green-400 text-white'
                                                        }`}
                                                    >
                                                        {day.getDate()}
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            }
        };

        ReactDOM.render(<EliteRentCarApp />, document.getElementById('root'));
    </script>
    
    <script>
        // Service Worker registracija za PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js').then(function(registration) {
                    console.log('ServiceWorker registration successful');
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html>
